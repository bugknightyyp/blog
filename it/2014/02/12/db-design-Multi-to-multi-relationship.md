#数据库设计：多对多关系

在sql数据库里，如果两个实体表存在多对多的关系，那么需要在另外建一个关于这2者的关系映射表。

在no-sql数据库里，就没那么严格了，相对随意一些。那么面对多对多的关系可以怎么处理呢？

下面以 `article`和 `tags`，为例说明： 

- 只在其中一个表中新建一个字段，来保存2者的关系。

  如在`article`表里保存2者关系：

  ```
  article {
      articalID: "",
      title:'',
      content:'',
      tags:[] //保存该文章的标签的id
  }

  ```
  
  或在`tags`表里保存2者关系：

  ```
  tags {
      tagsID: "",
      name:'',
      article:[] //保存该标签的文章的id
  }

  ```
  
  在这种情况下，不足是：假如2者的映射关系保存在article表里了，那么要想找出与某标签相关的文章，你必须要遍历article表的所有记录才能得到结果；
  好处是：2者的关系只需要维护一份。
  
- 两者都保存各自的与对方的关系。
  
  ```
  article {
      articalID: "",
      title:'',
      content:'',
      tags:[] //保存该文章的标签的id
  }
  
  tags {
      tagsID: "",
      name:'',
      article:[] //保存该标签的文章的id
  }
  ```
  
  在这种情况下，不足是：2者的关系需要维护二份；
  好处是：很容易通过自身保存的2者映射关系，很容易找到与之相关的彼此。
  
  
  [Mongodb 两种建立多对多关联方式的性能对比][0] 这篇文章在mongodb下测试了这2种方式的性能

  
##参考

[mongodb中使用数组建立多对多关系][1]

  
[0]:http://codecampo.com/topics/168  "Mongodb 两种建立多对多关联方式的性能对比"
[1]:http://www.2cto.com/database/201304/205007.html "mongodb中使用数组建立多对多关系"
